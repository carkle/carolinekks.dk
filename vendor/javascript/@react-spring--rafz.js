// @react-spring/rafz@10.0.0 downloaded from https://ga.jspm.io/npm:@react-spring/rafz@10.0.0/dist/react-spring_rafz.modern.mjs

var e=w();var n=n=>u(n,e);var t=w();n.write=e=>u(e,t);var a=w();n.onStart=e=>u(e,a);var r=w();n.onFrame=e=>u(e,r);var o=w();n.onFinish=e=>u(e,o);var l=[];n.setTimeout=(e,t)=>{const a=n.now()+t;const r=()=>{const e=l.findIndex((e=>e.cancel==r));~e&&l.splice(e,1);s-=~e?1:0};const o={time:a,handler:e,cancel:r};l.splice(c(a),0,o);s+=1;h();return o};var c=e=>~(~l.findIndex((n=>n.time>e))||~l.length);n.cancel=n=>{a.delete(n);r.delete(n);o.delete(n);e.delete(n);t.delete(n)};n.sync=e=>{f=true;n.batchedUpdates(e);f=false};n.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function o(...e){t=e;n.onStart(r)}o.handler=e;o.cancel=()=>{a.delete(r);t=null};return o};var d=typeof window!="undefined"?window.requestAnimationFrame:()=>{};n.use=e=>d=e;n.now=typeof performance!="undefined"?()=>performance.now():Date.now;n.batchedUpdates=e=>e();n.catch=console.error;n.frameLoop="always";n.advance=()=>{n.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):v()};var i=-1;var s=0;var f=false;function u(e,n){if(f){n.delete(e);e(0)}else{n.add(e);h()}}function h(){if(i<0){i=0;n.frameLoop!=="demand"&&d(p)}}function m(){i=-1}function p(){if(~i){d(p);n.batchedUpdates(v)}}function v(){const d=i;i=n.now();const f=c(i);if(f){y(l.splice(0,f),(e=>e.handler()));s-=f}if(s){a.flush();e.flush(d?Math.min(64,i-d):16.667);r.flush();t.flush();o.flush()}else m()}function w(){let e=new Set;let n=e;return{add(t){s+=n!=e||e.has(t)?0:1;e.add(t)},delete(t){s-=n==e&&e.has(t)?1:0;return e.delete(t)},flush(t){if(n.size){e=new Set;s-=n.size;y(n,(n=>n(t)&&e.add(n)));s+=e.size;n=e}}}}function y(e,t){e.forEach((e=>{try{t(e)}catch(e){n.catch(e)}}))}var z={count(){return s},isRunning(){return i>=0},clear(){i=-1;l=[];a=w();e=w();r=w();t=w();o=w();s=0}};export{z as __raf,n as raf};

